{% extends "shared/analysis.html" %}

{% block js %}
<link type="text/css" href="{{STATIC_URL}}styles/lattice.css" rel="stylesheet" />
<!-- Collapsible panel -->
<link type="text/css" href="{{STATIC_URL}}styles/collapsible_panel.css" rel="stylesheet" />
<script type="text/javascript" src="{{STATIC_URL}}scripts/collapsible_panel.js"></script>
<!-- D3 -->
<script type="text/javascript" src="{{STATIC_URL}}scripts/d3.v2.min.js"></script>
<!-- jquery slider -->
<link type="text/css" href="{{STATIC_URL}}styles/jquery-ui-1.8.20.custom.css" rel="stylesheet" />
<script type="text/javascript" src="{{STATIC_URL}}scripts/jquery-ui-1.8.20.custom.min.js"></script>
<!-- bootstrap popovers -->
<script type="text/javascript" src="{{STATIC_URL}}scripts/bootstrap-tooltip.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}scripts/bootstrap-popover.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}scripts/bootstrap-modal.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}scripts/bootstrap-tabs.js"></script>
<!-- highcharts -->
<script type="text/javascript" src="{{STATIC_URL}}scripts/highcharts.2.2.2.js"></script>
<!-- dashboard -->
<link type="text/css" href="{{STATIC_URL}}styles/dashboard.css" rel="stylesheet" />
<!-- multiselect -->
<link type="text/css" href="{{STATIC_URL}}styles/jquery.multiSelect.css" rel="stylesheet" />
<script type="text/javascript" src="{{STATIC_URL}}scripts/jquery.bgiframe.min.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}scripts/jquery.multiSelect.js"></script>
<!-- autosuggest -->
<link type="text/css" href="{{STATIC_URL}}styles/token-input-facebook.css" rel="stylesheet" />
<script type="text/javascript" src="{{STATIC_URL}}scripts/jquery.tokeninput.js"></script>
<!-- CUBIX  -->
<script type="text/javascript" src="{{STATIC_URL}}scripts/cubix.utils.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}scripts/cubix.visualisation.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}scripts/cubix.associationrules.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}scripts/cubix.layout.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}scripts/cubix.filters.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}scripts/cubix.facets.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}scripts/cubix.transform.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}scripts/cubix.lattice.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}scripts/cubix.dashboard.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}scripts/cubix.min-intersect.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}scripts/cubix.context.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}scripts/cubix.compare.js"></script>

{% endblock js %}

{% block sidebar %}


{% endblock sidebar %}

{% block content %}
<div id="open-file" style="display:none">
	<form enctype="multipart/form-data" method="post" action="/fca/load_cxt/" id="load_cxt_form">
	   {% csrf_token %}   
	   {{ cxt_form.as_p }}
	     <input type="submit" value="Upload" />
	    <a href="#" class="cancel-upload">Cancel</a>
	   <!--
	    <a href="#" onclick="document.load_cxt_form.submit()">Load cxt</a> -->
	</form>
</div>


<div id="hoverbox" class="tooltip" style="opacity: 0; display:none;">
	<div>
		<span>Attributes</span>
		<ul class="hb_attr_list"/>
	</div>
	<div>
		<span>Objects</span>
		<ul class="hb_obj_list"/>
	</div>
</div>

<div id="A_rules_box" class="tooltip" style="opacity: 0; display:none;">
<div>
<ul class="hb_role"/>
</div>
<div>
<span>Confidence</span>
<ul class="hb_confidence"/>
</div>
<div>
<span>Antecedent Support</span>
<ul class="hb_p_support"/>
</div>
<div>
<span>Consequent Support</span>
<ul class="hb_c_support"/>
</div>
<div>
<span>Antecedent</span>
<ul class="hb_premise_list"/>
</div>
<div>
<span>Consequent</span>
<ul class="hb_consequence_list"/>
</div>
</div>


<div style="overflow: hidden; width: 100%; padding-bottom: 10px">
	
	<div id="bounds">
	    <label><input type="radio" name="toggle" value="lattice" checked="checked"><span>Lattice</span></label>
	    <label><input type="radio" name="toggle" value="rules"><span>Rules</span></label>
	</div>
	
	<div style="float: left;">
		<!--
		<label for="layout_type">Layout:</label>
		-->
		<input type="text" id="layout_type" style="border:0; color:#f6931f; font-weight:bold; width: 70px; float:left" />
		<div id="slider-layout" style="width: 150px; margin: 8px 40px 8px 20px; float: left"></div>
	</div>
	<div style="margin-left: 20px; float: left;">
		<input type="text" id="search" style="width: 300px;" class="search"/>
		<input type="button" class="filter-search" value="Filter"/>
	</div>
	
	<div style="margin-left: 20px; float: left;">
		<a href="#" class="lattice-json-link">Lattice.json</a>
		<a href="#" class="ar-json-link">Association Rules.json</a>
	</div>

</div>



<div class="span12">
	<div id="chart" class="span6"></div>
	<!--
	<div class="span6" style="">&nbsp;</div>
	-->
	
	<div id="columns" class="span6">
		<ul id="dashboard_lattice" class="column">
            <!--
            <li class="widget color-green" id="intro">
                <div class="widget-head">
                    <h3>Welcome to iNettuts</h3>
                </div>
                <div class="widget-content">
                    <p>Hello, welcome to the <strong>iNettuts</strong> demonstration. The tutorial which details how this interface was created can be found on <a href="http://nettuts.com">NETTUTS.com</a>.</p>
                    <p>This demo and its accompanying tutorial were made by <a href="http://james.padolsey.com">James Padolsey</a>.</p>
                <p>NOTE: You'll notice that you cannot move, edit, remove or collapse this particular widget - the script which this is running on allows for per-widget settings and this widget has been set not to allow closing, editing, collapsing or moving.</p>
                </div>
            </li>
            -->
            <li class="widget color-silver">  
                <div class="widget-head">
                    <h3>Co-occurence</h3>
                </div>
                
                <div class="edit-box" style="display:none">
					<div>
							<label for="control_1">X: </label>
							<select id="control_1" name="control_1[]" multiple="multiple" size="5" style="width: 120px; font-size: 10px;">
							</select>
					</div><div>
							<span>Y: </span>
							<select id="control_2" name="control_2[]" multiple="multiple" size="5" style="width: 120px; font-size: 10px;">
							</select>
					</div><div>
							<a href="#" class="draw-chart-1a">Refresh</a>
						</div>
				</div>

                <div class="widget-content">
                    
					<div id="box1a-chart" style="float:left; width: 100%; height: 80%"></div>

                </div>
            </li>
            
            <li class="widget color-silver">  
                <div class="widget-head">
                    <h3>Distribution</h3>
                </div>
                
                <div class="edit-box" style="display:none">
					No config available for this chart.
				</div>

                <div class="widget-content">
                    
					<div id="distribution-chart" style="float:left; width: 100%; height: 80%"></div>

                </div>
            </li>
            
            <li class="widget color-yellow">  
                <div class="widget-head">
                    <h3>Chat</h3>
                </div>
                <div class="widget-content">
                    <p>Try clicking the 'X' in the top right of this widget... Just watch how cool the animaton is! :D</p>
                    <ul>
                        <li>Since this is just a demo your settings will NOT be saved anywhere when you leave the page.</li>
                        <li>This demo has been tested successfully on a Windows XP PC in the following browsers: Firefox 2, Firefox 3, Chrome, Safari 3, Opera 9.5, IE6, IE7</li>
                    </ul>
                </div>
            </li>
            
            <li class="widget color-blue" id="instructions">  
                <div class="widget-head">
                    <h3>Top Facts</h3>
                </div>
                <div class="widget-content">
                    <ul>
                        <li>To move a widget just hold your mouse down over the top coloured bar of the widget and then move it to where you want.</li>
                        <li>You can also close a widget by clicking the 'X' on the top right of any widget. Collapsing a widget is just as easy; click the down/up arrow on the top left of each widget.</li>
                        <li>To edit the color of a widget or it's title just click the 'edit' button.</li>
                    </ul>
                </div>
            </li>
            
            <li class="widget color-green">  
                <div class="widget-head">
                    <h3>Chart</h3>
                </div>
                <div class="widget-content">
                    <ul>
                        <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam magna sem, fringilla in, commodo a, rutrum ut, massa. Donec id nibh eu dui auctor tempor. Morbi laoreet eleifend dolor. Suspendisse pede odio, accumsan vitae, auctor non, suscipit at, ipsum. Cras varius sapien vel lectus.</li>  
                    </ul>
                </div>
            </li>
        </ul>
		
		<ul id="dashboard_ar" class="column" style="display: none">
			
			
            <li class="widget color-silver" id="intro">
                <div class="widget-head">
                    <h3>Association rules distribution</h3>
                </div>
                <div class="widget-content" id="sc_pl_div">
                    
                </div>
            </li>
             <li class="widget color-silver" id="rules_container">
                <div class="widget-head" >
                    <h3>Generated rules</h3>
                </div>
                <div class="widget-content" id="rules_render_area">
                </div>
            </li>
        </ul>
        
        
 
	</div>
	
	
</div>


	
	

<script type="text/javascript">
	// load lattice

	var mouseOverHoverBox = false;

	var _data_nodes = [];
	var _data_links = [];

	var data;

	var cnode;
	var clink;
	var ulabel;
	var llabel;

	var hoverbox; 
	
	{% if djson != null %}

var json = {{ djson|safe }};

$(function(){
	loadData(json);	
});


{% else %}	
$(function(){ // TODO perfomance evitar 
d3.json("/api/v1/lattice/sample", loadData);
});
{% endif %}
</script>
{% endblock content %}

